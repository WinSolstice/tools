##### git分支  
在我们的现实开发中，需求往往是五花八门的，同时开发多个需求的情况十分常见，当你正在专注开发一个功能时，突然有一个紧急的BUG需要你来修复，这个时候我们当然是希望在能够保存当前任务进度，再去修改这个BUG，等这个BUG修复完成后再继续我们的任务。如何实现呢？

**Git通过创建分支来解决实际开发中类似的问题**

在Git的使用过程中一次提交称为历史记录（版本），并且会生成一个唯一的字符串，如下图  ： commit 后会生成一个唯一的字符串
<img src='./images/git21'></img>
这个串可以代表某一个历史版本（**实际使用只取前面几位就可以所引到**
*注意：红框里的  HEAD-->master *

值得注意的是所有的提交（commit）实际上都是在分支（branch）的基础上进行的:如下图：
<img src='./images/git22'></img>
  
当我们在初始化仓库的时候（实际上是产生第1次提交时），Git会默认帮我们创建了一个master的分支，并且有指针（HEAD）指到了末端
指针（HEAD）用来标明当前处于哪个分支的哪个版本
默认只有一个master分支
我们也可以创建自已的分支

###### 1. 创建分支
+ git branch &lt;name&gt;
当接到一个新任务时，先创建一个分支，例如购物车功能 git branch cart
新分支会在当前分支原有历史版本的结点上进行创建，我们称其为子分支
如下图：
<img src='./images/git23'></img>
   

**新建的子分支会继承父分支的所有提交历史**
当我们创建分支时，其实相当于把master分支里的内容复制了一份到新的分支

###### 2. 切换分支
+ git checkout cart(分支名称)
上一步只是创建了一个新的分支cart，要开发购物车功能需要切换到 cart 分支里进行开发
<img src='./images/git24'></img>

 **注意 当切换路径后 HEAD 指向当前 cart 路径** 
 此时是在cart分支内编译代码  
 *执行 git checkout branch的时候git告诉系统：之后的代码是在当前分支进行操作了，并且将仓库里当前分支最后一次提交的内容拿出来给到工作区，所以我们能看到之前的提交内容*
<img src='./images/git25'></img>
**HEAD 默认指向当前分支**
  

###### 3. 提交操作
持续开发购物车功能，将新添加的功能进行提交
<img src='./images/git26'></img>
这次的提交历史版本就会记录在cart这个分支上了，**并且 HEAD 伴随 cart 在移动**
###### 4. 修复bug
开发购物车过程中突然需要紧急修复一个bug，这时可以另外建立一个分支来进行修复，先切换到master分支: git checkout master
<img src='./images/git27'></img>
   
当我们切换回master后，HEAD指向了master分支的末端，并且我们观察**发现我们工作目录中并没有购物车功能代码。**

###### 5. 创建新分支修复bug
创建一个新分支 hotwork , 修改并提交会在 hotwork 分支上创建新版本，并不会影响到cart分支的代码。
<img src='./images/git28'></img>
   


##### 6. 继续之前的开发
修复完bug后切换回 cart 分支，继续开发购物车功能。

注：当我们git checkout branchname时，HEAD会自动指向对应分支的末端，工作目录中的源码也会随之发生改变。

这个时候我们就在 hotwork 这个分支上修复了这个BUG，而我们原来在cart分支上的操作并未受到影响。

**同理可得：cart分支并没有包含 hotwork 分支上对于bug的修复. 由此我们知道，分支时独立工作，互相之间并不影响的**

###### 7. 合并（融合）分支
+ git merge branchname 用于合并指定分支到当前分支上
```
    $ git checkout cart
    $ git merge hotwork 
```
<img src='./images/git28'></img>
这时 hotwork 分支上的代码就被合并到了 cart 分支上，cart 包含了 hotwork 里的修复并且有了两个父结点。
*合并代码时，系统会进行判断，相同的提交内容被跳过，不同的内容会进行合并*

###### 8. 处理冲突
实际工作中，一个项目可能需要好几个开发者共同协作完成，假设 A 和 B同时负责一个项目，这是有一个功能 C 被 A和B同时进行了提交，会发生什么事情呢？

这时就会就会产生冲突了，当冲突产生后，需要开发者进行协商确认冲突的原因，然后将冲突代码删除重新提交就可以了。

###### 8. 删除分支
+ git branch -d branchname
这时用来修复bug创建的 hotfix 分支已经没有用处了，我们可以将它删除。
删除后，查看branch,就只剩下 master 和 cart 了 
```
     $ git branch 
     * cart 
     marster
```

创建、合并和删除分支非常快，并且在分支上开发项目并不会影响到其他的分支，所以git鼓励你使用分支完成某个任务，合并后再删除点分支，这和直接在 master 分支上工作效果是一样的，而且过程更安全

git branch -a 便可以查看所有(本地+远程仓库)分支了

**git 鼓励大家使用分支：**

+ 查看分支： git branch
+ 创建分支： git branch <name>
+ 切换分支： git checkout <name>
+ 创建加切换分支： git checkout -b <name>
+ 合并某分支到当前分支： git merge <name>
+ 删除分支： git branch -d <name>


 
